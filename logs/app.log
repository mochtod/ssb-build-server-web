2025-04-24 02:29:27,760 - __main__ - INFO - Checking USERS_FILE path: /app/users.json
 * Serving Flask app 'app'
 * Debug mode: off
2025-04-24 02:29:27,806 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5150
 * Running on http://172.18.0.5:5150
2025-04-24 02:29:27,806 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-04-24 02:29:35,177 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:29:35] "GET /login?next=http://localhost:5150/ HTTP/1.1" 200 -
2025-04-24 02:29:35,213 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:29:35] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-04-24 02:29:40,201 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:29:40] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-24 02:29:40,210 - redis_client - INFO - Redis client initialized with host=redis, port=6379, compression=enabled
2025-04-24 02:29:40,234 - vsphere_redis_cache - INFO - Retrieved 0 templates from Redis cache
2025-04-24 02:29:40,235 - __main__ - INFO - Rendering index template with vSphere data: 1 servers available
2025-04-24 02:29:40,235 - __main__ - INFO - Cache status: {'last_sync': None, 'last_updated': None, 'sync_status': 'running', 'sync_progress': {'timestamp': '2025-04-24T01:38:00.210557', 'started': '2025-04-24T01:37:37.426115', 'progress': 22, 'status': 'running', 'counts': {'datacenters': 5, 'clusters': 23}, 'message': 'Synced clusters: 23 items (22% complete)'}, 'cache_status': {'datacenters': {'exists': True, 'ttl': 481, 'count': 5}, 'clusters': {'exists': True, 'ttl': 500, 'count': 23}, 'hosts': {'exists': False, 'ttl': None, 'count': 0}, 'datastores': {'exists': True, 'ttl': 796, 'count': 303}, 'networks': {'exists': True, 'ttl': 796, 'count': 257}, 'resource_pools': {'exists': True, 'ttl': 815, 'count': 24}, 'vms': {'exists': False, 'ttl': None, 'count': 0}, 'templates': {'exists': False, 'ttl': None, 'count': 0}}, 'total_objects': 0, 'connected': True, 'cache_hit_rate': '100.0%', 'memory_usage': '1.2 MB', 'sync_duration': 'Unknown'}
2025-04-24 02:29:40,235 - __main__ - INFO - Retrieved datastore clusters: 22 available
2025-04-24 02:29:40,301 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:29:40] "GET / HTTP/1.1" 200 -
2025-04-24 02:29:40,367 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:29:40] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-04-24 02:29:40,369 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:29:40] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-04-24 02:29:53,490 - root - INFO - Hierarchical API request - Server: virtualcenter.chrobinson.com, Datacenter: None, Cluster: None
2025-04-24 02:29:53,492 - root - INFO - Redis connection status: True
2025-04-24 02:29:53,493 - root - INFO - Total datacenters in cache: 5
2025-04-24 02:29:53,494 - root - INFO - Total clusters in cache: 23
2025-04-24 02:29:53,499 - vsphere_redis_cache - INFO - Retrieved 0 templates from Redis cache
2025-04-24 02:29:53,499 - root - INFO - Returned datacenters: 5
2025-04-24 02:29:53,499 - root - INFO - Returned clusters: 23
2025-04-24 02:29:53,507 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:29:53] "GET /api/vsphere/hierarchical?vsphere_server=virtualcenter.chrobinson.com HTTP/1.1" 200 -
2025-04-24 02:29:53,516 - root - INFO - Hierarchical API request - Server: virtualcenter.chrobinson.com, Datacenter: None, Cluster: None
2025-04-24 02:29:53,517 - root - INFO - Redis connection status: True
2025-04-24 02:29:53,518 - root - INFO - Total datacenters in cache: 5
2025-04-24 02:29:53,518 - root - INFO - Total clusters in cache: 23
2025-04-24 02:29:53,522 - vsphere_redis_cache - INFO - Retrieved 0 templates from Redis cache
2025-04-24 02:29:53,523 - root - INFO - Returned datacenters: 5
2025-04-24 02:29:53,523 - root - INFO - Returned clusters: 23
2025-04-24 02:29:53,526 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:29:53] "GET /api/vsphere/hierarchical?vsphere_server=virtualcenter.chrobinson.com HTTP/1.1" 200 -
2025-04-24 02:29:59,111 - root - INFO - Hierarchical API request - Server: virtualcenter.chrobinson.com, Datacenter: datacenter-264, Cluster: None
2025-04-24 02:29:59,112 - root - INFO - Redis connection status: True
2025-04-24 02:29:59,112 - root - INFO - Total datacenters in cache: 5
2025-04-24 02:29:59,113 - root - INFO - Total clusters in cache: 23
2025-04-24 02:29:59,113 - root - INFO - Clusters for datacenter 'datacenter-264': 5
2025-04-24 02:29:59,118 - vsphere_redis_cache - INFO - Retrieved 0 templates from Redis cache
2025-04-24 02:29:59,119 - vsphere_redis_cache - INFO - No templates found for datacenter datacenter-264, returning all 0 templates
2025-04-24 02:29:59,119 - vsphere_redis_cache - INFO - Filtering clusters for datacenter_id: datacenter-264
2025-04-24 02:29:59,119 - vsphere_redis_cache - INFO - Found 5 clusters out of 23 for datacenter datacenter-264
2025-04-24 02:29:59,123 - root - INFO - Returned datacenters: 5
2025-04-24 02:29:59,123 - root - INFO - Returned clusters: 5
2025-04-24 02:29:59,127 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:29:59] "GET /api/vsphere/hierarchical?vsphere_server=virtualcenter.chrobinson.com&datacenter_id=datacenter-264 HTTP/1.1" 200 -
2025-04-24 02:29:59,136 - root - INFO - Hierarchical API request - Server: virtualcenter.chrobinson.com, Datacenter: datacenter-264, Cluster: None
2025-04-24 02:29:59,137 - root - INFO - Redis connection status: True
2025-04-24 02:29:59,138 - root - INFO - Total datacenters in cache: 5
2025-04-24 02:29:59,138 - root - INFO - Total clusters in cache: 23
2025-04-24 02:29:59,138 - root - INFO - Clusters for datacenter 'datacenter-264': 5
2025-04-24 02:29:59,142 - vsphere_redis_cache - INFO - Retrieved 0 templates from Redis cache
2025-04-24 02:29:59,142 - vsphere_redis_cache - INFO - No templates found for datacenter datacenter-264, returning all 0 templates
2025-04-24 02:29:59,142 - vsphere_redis_cache - INFO - Filtering clusters for datacenter_id: datacenter-264
2025-04-24 02:29:59,142 - vsphere_redis_cache - INFO - Found 5 clusters out of 23 for datacenter datacenter-264
2025-04-24 02:29:59,143 - root - INFO - Returned datacenters: 5
2025-04-24 02:29:59,143 - root - INFO - Returned clusters: 5
2025-04-24 02:29:59,145 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:29:59] "GET /api/vsphere/hierarchical?vsphere_server=virtualcenter.chrobinson.com&datacenter_id=datacenter-264 HTTP/1.1" 200 -
2025-04-24 02:29:59,157 - root - INFO - Hierarchical API request - Server: virtualcenter.chrobinson.com, Datacenter: datacenter-264, Cluster: None
2025-04-24 02:29:59,158 - root - INFO - Redis connection status: True
2025-04-24 02:29:59,159 - root - INFO - Total datacenters in cache: 5
2025-04-24 02:29:59,160 - root - INFO - Total clusters in cache: 23
2025-04-24 02:29:59,160 - root - INFO - Clusters for datacenter 'datacenter-264': 5
2025-04-24 02:29:59,163 - vsphere_redis_cache - INFO - Retrieved 0 templates from Redis cache
2025-04-24 02:29:59,163 - vsphere_redis_cache - INFO - No templates found for datacenter datacenter-264, returning all 0 templates
2025-04-24 02:29:59,163 - vsphere_redis_cache - INFO - Filtering clusters for datacenter_id: datacenter-264
2025-04-24 02:29:59,163 - vsphere_redis_cache - INFO - Found 5 clusters out of 23 for datacenter datacenter-264
2025-04-24 02:29:59,163 - root - INFO - Returned datacenters: 5
2025-04-24 02:29:59,163 - root - INFO - Returned clusters: 5
2025-04-24 02:29:59,168 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:29:59] "GET /api/vsphere/hierarchical?vsphere_server=virtualcenter.chrobinson.com&datacenter_id=datacenter-264 HTTP/1.1" 200 -
2025-04-24 02:30:03,827 - root - INFO - Hierarchical API request - Server: virtualcenter.chrobinson.com, Datacenter: datacenter-264, Cluster: domain-c9891266
2025-04-24 02:30:03,828 - root - INFO - Redis connection status: True
2025-04-24 02:30:03,828 - root - INFO - Total datacenters in cache: 5
2025-04-24 02:30:03,829 - root - INFO - Total clusters in cache: 23
2025-04-24 02:30:03,829 - root - INFO - Clusters for datacenter 'datacenter-264': 5
2025-04-24 02:30:03,833 - vsphere_redis_cache - INFO - Retrieved 0 templates from Redis cache
2025-04-24 02:30:03,833 - vsphere_redis_cache - INFO - No templates found for datacenter datacenter-264, returning all 0 templates
2025-04-24 02:30:03,833 - vsphere_redis_cache - INFO - Filtering clusters for datacenter_id: datacenter-264
2025-04-24 02:30:03,833 - vsphere_redis_cache - INFO - Found 5 clusters out of 23 for datacenter datacenter-264
2025-04-24 02:30:03,834 - vsphere_redis_cache - INFO - No cluster-specific datastore clusters found for domain-c9891266, returning all datastore clusters
2025-04-24 02:30:03,836 - root - INFO - Returned datacenters: 5
2025-04-24 02:30:03,836 - root - INFO - Returned clusters: 5
2025-04-24 02:30:03,839 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:30:03] "GET /api/vsphere/hierarchical?vsphere_server=virtualcenter.chrobinson.com&datacenter_id=datacenter-264&cluster_id=domain-c9891266 HTTP/1.1" 200 -
2025-04-24 02:32:40,002 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:32:40] "GET /configs HTTP/1.1" 200 -
2025-04-24 02:32:40,055 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:32:40] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-04-24 02:32:44,881 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:32:44] "[32mGET /config/unknown_unknown HTTP/1.1[0m" 302 -
2025-04-24 02:32:44,908 - vsphere_redis_cache - INFO - Retrieved 0 templates from Redis cache
2025-04-24 02:32:44,908 - __main__ - INFO - Rendering index template with vSphere data: 1 servers available
2025-04-24 02:32:44,908 - __main__ - INFO - Cache status: {'last_sync': None, 'last_updated': None, 'sync_status': 'running', 'sync_progress': {'timestamp': '2025-04-24T01:38:00.210557', 'started': '2025-04-24T01:37:37.426115', 'progress': 22, 'status': 'running', 'counts': {'datacenters': 5, 'clusters': 23}, 'message': 'Synced clusters: 23 items (22% complete)'}, 'cache_status': {'datacenters': {'exists': True, 'ttl': 296, 'count': 5}, 'clusters': {'exists': True, 'ttl': 315, 'count': 23}, 'hosts': {'exists': False, 'ttl': None, 'count': 0}, 'datastores': {'exists': True, 'ttl': 611, 'count': 303}, 'networks': {'exists': True, 'ttl': 611, 'count': 257}, 'resource_pools': {'exists': True, 'ttl': 630, 'count': 24}, 'vms': {'exists': False, 'ttl': None, 'count': 0}, 'templates': {'exists': False, 'ttl': None, 'count': 0}}, 'total_objects': 0, 'connected': True, 'cache_hit_rate': '100.0%', 'memory_usage': '1.2 MB', 'sync_duration': 'Unknown'}
2025-04-24 02:32:44,908 - __main__ - INFO - Retrieved datastore clusters: 22 available
2025-04-24 02:32:44,915 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:32:44] "GET / HTTP/1.1" 200 -
2025-04-24 02:32:44,959 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:32:44] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-04-24 02:32:44,973 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:32:44] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-04-24 02:35:50,716 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:35:50] "GET /configs HTTP/1.1" 200 -
2025-04-24 02:35:50,740 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:35:50] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-04-24 02:35:52,199 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:35:52] "[32mGET /config/unknown_unknown HTTP/1.1[0m" 302 -
2025-04-24 02:35:52,218 - vsphere_redis_cache - INFO - Retrieved 0 templates from Redis cache
2025-04-24 02:35:52,219 - __main__ - INFO - Rendering index template with vSphere data: 1 servers available
2025-04-24 02:35:52,219 - __main__ - INFO - Cache status: {'last_sync': None, 'last_updated': None, 'sync_status': 'running', 'sync_progress': {'timestamp': '2025-04-24T01:38:00.210557', 'started': '2025-04-24T01:37:37.426115', 'progress': 22, 'status': 'running', 'counts': {'datacenters': 5, 'clusters': 23}, 'message': 'Synced clusters: 23 items (22% complete)'}, 'cache_status': {'datacenters': {'exists': True, 'ttl': 109, 'count': 5}, 'clusters': {'exists': True, 'ttl': 128, 'count': 23}, 'hosts': {'exists': False, 'ttl': None, 'count': 0}, 'datastores': {'exists': True, 'ttl': 424, 'count': 303}, 'networks': {'exists': True, 'ttl': 424, 'count': 257}, 'resource_pools': {'exists': True, 'ttl': 443, 'count': 24}, 'vms': {'exists': False, 'ttl': None, 'count': 0}, 'templates': {'exists': False, 'ttl': None, 'count': 0}}, 'total_objects': 0, 'connected': True, 'cache_hit_rate': '100.0%', 'memory_usage': '1.2 MB', 'sync_duration': 'Unknown'}
2025-04-24 02:35:52,219 - __main__ - INFO - Retrieved datastore clusters: 22 available
2025-04-24 02:35:52,226 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:35:52] "GET / HTTP/1.1" 200 -
2025-04-24 02:35:52,257 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:35:52] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-04-24 02:35:52,263 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:35:52] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-04-24 02:35:59,190 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:35:59] "GET /configs HTTP/1.1" 200 -
2025-04-24 02:35:59,219 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:35:59] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-04-24 02:36:01,919 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:36:01] "GET /config/93c5b220_20250424022111 HTTP/1.1" 200 -
2025-04-24 02:36:01,957 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:36:01] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-04-24 02:36:01,958 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:36:01] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-04-24 02:36:08,915 - __main__ - INFO - Retrieving vSphere resources for environment: development
2025-04-24 02:36:08,922 - __main__ - INFO - Using cluster as resource pool: DC2-NP11-KUB (ID: domain-c3310244)
2025-04-24 02:36:08,922 - __main__ - INFO - Using datastore cluster for storage (ID: group-p9891256)
2025-04-24 02:36:08,946 - __main__ - INFO - Updated machine_inputs.tfvars with vSphere resource IDs for lin2dv2-ssb
2025-04-24 02:36:08,948 - terraform-executor - INFO - Created workspace directory: /app/vm-workspace/93c5b220-20250424022111
2025-04-24 02:36:08,954 - terraform-executor - INFO - Copied machine_inputs.tfvars to /app/vm-workspace/93c5b220-20250424022111/machine_inputs.tfvars
2025-04-24 02:36:08,982 - terraform-executor - INFO - Copied main.tf to /app/vm-workspace/93c5b220-20250424022111/main.tf
2025-04-24 02:36:08,985 - terraform-executor - INFO - Created variables.tf at /app/vm-workspace/93c5b220-20250424022111/variables.tf
2025-04-24 02:36:08,987 - terraform-executor - INFO - Running Terraform command: terraform init in /app/vm-workspace/93c5b220-20250424022111
2025-04-24 02:36:09,078 - terraform-executor - ERROR - Terraform command failed: [31m[31mâ•·[0m[0m
[31mâ”‚[0m [0m[1m[31mError: [0m[0m[1mUnreadable module directory[0m
[31mâ”‚[0m [0m
[31mâ”‚[0m [0m[0mUnable to evaluate directory symlink: lstat ../modules/vsphere-vm: no such
[31mâ”‚[0m [0mfile or directory
[31mâ•µ[0m[0m
[0m[0m
[31m[31mâ•·[0m[0m
[31mâ”‚[0m [0m[1m[31mError: [0m[0m[1mFailed to read module directory[0m
[31mâ”‚[0m [0m
[31mâ”‚[0m [0m[0mModule directory  does not exist or cannot be read.
[31mâ•µ[0m[0m
[0m[0m
[31m[31mâ•·[0m[0m
[31mâ”‚[0m [0m[1m[31mError: [0m[0m[1mUnreadable module directory[0m
[31mâ”‚[0m [0m
[31mâ”‚[0m [0m[0mUnable to evaluate directory symlink: lstat ../modules/vsphere-vm: no such
[31mâ”‚[0m [0mfile or directory
[31mâ•µ[0m[0m
[0m[0m
[31m[31mâ•·[0m[0m
[31mâ”‚[0m [0m[1m[31mError: [0m[0m[1mFailed to read module directory[0m
[31mâ”‚[0m [0m
[31mâ”‚[0m [0m[0mModule directory  does not exist or cannot be read.
[31mâ•µ[0m[0m
[0m[0m

2025-04-24 02:36:09,083 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:36:09] "[32mPOST /plan/93c5b220_20250424022111 HTTP/1.1[0m" 302 -
2025-04-24 02:36:09,103 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:36:09] "GET /config/93c5b220_20250424022111 HTTP/1.1" 200 -
2025-04-24 02:36:09,128 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:36:09] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-04-24 02:36:09,129 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:36:09] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-04-24 02:36:55,896 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:36:55] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-04-24 02:37:12,178 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:37:12] "GET /settings HTTP/1.1" 200 -
2025-04-24 02:37:12,281 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:37:12] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-04-24 02:37:12,304 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:37:12] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-04-24 02:37:12,398 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:37:12] "GET /api/vsphere-cache/status HTTP/1.1" 200 -
2025-04-24 02:37:21,166 - vsphere_redis_cache - INFO - Sync already in progress, returning progress info
2025-04-24 02:37:21,168 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:37:21] "POST /api/vsphere-cache/sync HTTP/1.1" 200 -
2025-04-24 02:37:23,185 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:37:23] "GET /api/vsphere-cache/status HTTP/1.1" 200 -
2025-04-24 02:37:30,461 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:37:30] "GET /configs HTTP/1.1" 200 -
2025-04-24 02:37:30,490 - werkzeug - INFO - 172.18.0.1 - - [24/Apr/2025 02:37:30] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
